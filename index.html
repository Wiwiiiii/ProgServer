<html>

<head>
  <title>
    JS - Liste ADD Memory
  </title>

</head>
<form>
  <input type="button" id="add" value="Add New">
  <ul id="list_item"></ul>
  <input type="text" id="item" name="name">
</form>


<script>
  /*document.getElementById("add").onclick = function () {
    var node = document.createElement("li");
    var text = document.getElementById("user_input").value;
    var textnode = document.createTextNode(text);
    node.appendChild(textnode);
    document.getElementById("list_item").appendChild(node);
  }*/

  //On sélectonne les éléments HTML
  const form = document.querySelector('form')
  const ul = document.querySelector('ul')
  const input = document.getElementById('item')
  //On affiche la save fait avec localStorage avec la clé items
  let itemsArray = localStorage.getItem('items') ? JSON.parse(localStorage.getItem('items')) : []

  //Initialisation de la save
  localStorage.setItem('items', JSON.stringify(itemsArray))
  const data = JSON.parse(localStorage.getItem('items'))

  //On ajoute les li+val à la liste
  const liMaker = text => {
    const li = document.createElement('li')
    li.textContent = text
    ul.appendChild(li)
  }

  //On initialise la save et on y met les valeurs des li dans un tab
  document.getElementById("add").onclick = function () {
    itemsArray.push(input.value)
    localStorage.setItem('items', JSON.stringify(itemsArray))
    liMaker(input.value)
    input.value = ''
  }

  data.forEach(item => {
    liMaker(item)
  })

</script>



<body>

</body>

</html>
